<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Παλέρμο - Μυστική Εμφάνιση Ρόλων</title>
<style>
    body { font-family: Arial; max-width: 650px; margin: 20px auto; }
    .player-input { margin-bottom: 5px; }
    #secretBox {
        border: 2px solid black;
        padding: 20px;
        margin-top: 20px;
        display: none;
        text-align: center;
        background: #f2f2f2;
        font-size: 22px;
    }
</style>
</head>
<body>

<h2>Παιχνίδι Παλέρμο</h2>

<!-- Βήμα 1: Αριθμός παικτών -->
<label>Αριθμός παικτών:</label>
<input type="number" id="playerCount" min="1">
<button onclick="createPlayerInputs()">OK</button>

<div id="players"></div>

<!-- Βήμα 2: Επιλογή ρόλων -->
<h3>Επίλεξε ρόλους (μόνο 1 από κάθε ρόλο):</h3>

<label><input type="checkbox" class="role" value="Φανερός Δολοφόνος"> Φανερός Δολοφόνος</label><br>
<label><input type="checkbox" class="role" value="Κρυφός Δολοφόνος"> Κρυφός Δολοφόνος</label><br>
<label><input type="checkbox" class="role" value="Κρυφός Δολοφόνος 2"> Κρυφός Δολοφόνος 2</label><br>
<label><input type="checkbox" class="role" value="Μπάτσος"> Μπάτσος</label><br>
<label><input type="checkbox" class="role" value="Ρουφιάνος"> Ρουφιάνος</label><br>
<label><input type="checkbox" class="role" value="Δήμαρχος"> Δήμαρχος</label><br>
<label><input type="checkbox" class="role" value="Τρέλα"> Τρέλα</label><br>
<label><input type="checkbox" class="role" value="Γιατρός"> Γιατρός</label><br>
<label><input type="checkbox" class="role" value="Πυρομανής"> Πυρομανής</label><br>
<label><input type="checkbox" class="role" value="Μητέρα Τερέζα"> Μητέρα Τερέζα</label><br>
<label><input type="checkbox" class="role" value="Ερωτευμένος 1"> Ερωτευμένος 1</label><br>
<label><input type="checkbox" class="role" value="Ερωτευμένος 2"> Ερωτευμένος 2</label><br><br>

<button onclick="assignRoles()">Μοίρασε Ρόλους</button>

<h3>Μυστική Εμφάνιση Ρόλων</h3>
<button id="nextPlayerBtn" style="display:none;" onclick="showNextPlayer()">Επόμενος Παίκτης</button>

<div id="secretBox"></div>

<script>
let finalPlayers = [];
let finalRoles = [];
let currentIndex = 0;

function createPlayerInputs() {
    const count = document.getElementById("playerCount").value;
    const container = document.getElementById("players");
    container.innerHTML = "";

    for (let i = 0; i < count; i++) {
        container.innerHTML += 
            `<div class="player-input">
                Παίκτης ${i+1}: <input type="text" id="player${i}">
             </div>`;
    }
}

function assignRoles() {
    const count = document.getElementById("playerCount").value;

    // Συλλογή ονομάτων
    finalPlayers = [];
    for (let i = 0; i < count; i++) {
        const name = document.getElementById(`player${i}`).value.trim();
        if (name === "") {
            alert("Συμπλήρωσε όλα τα ονόματα!");
            return;
        }
        finalPlayers.push(name);
    }

    // Επιλογή ρόλων
    let selectedRoles = [];
    document.querySelectorAll(".role:checked").forEach(cb => {
        selectedRoles.push(cb.value);
    });

    if (selectedRoles.length === 0) {
        alert("Επίλεξε τουλάχιστον έναν ρόλο!");
        return;
    }

    // Αν οι παίκτες είναι περισσότεροι, συμπλήρωσε με Πολίτες
    while (selectedRoles.length < finalPlayers.length) {
        selectedRoles.push("Πολίτης");
    }

    // Shuffle ρόλων
    finalRoles = selectedRoles.sort(() => Math.random() - 0.5);

    // Έναρξη μυστικής εμφάνισης
    currentIndex = 0;
    document.getElementById("nextPlayerBtn").style.display = "block";
    document.getElementById("secretBox").style.display = "none";

    alert("Οι ρόλοι έχουν μοιραστεί! Πάτησε 'Επόμενος Παίκτης'.");
}

function showNextPlayer() {
    if (currentIndex >= finalPlayers.length) {
        alert("Τελείωσαν όλοι οι παίκτες!");
        return;
    }

    const box = document.getElementById("secretBox");
    box.style.display = "block";
    box.innerHTML = `<b>${finalPlayers[currentIndex]}</b><br>Ο ρόλος σου είναι:<br><h2>${finalRoles[currentIndex]}</h2>
                     <button onclick="hideRole()">Κλείσε</button>`;
}

function hideRole() {
    document.getElementById("secretBox").style.display = "none";
    currentIndex++;
}
</script>

</body>
</html>
